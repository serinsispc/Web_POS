@{
    ViewBag.Title = "Código QR de Acceso";
    Layout = "~/Views/Shared/_LayoutMenu.cshtml"; // tu layout
    string linkQr = ViewBag.LinkQr as string;
}

<div class="container text-center mt-5">
    <h3 class="mb-4">Acceso rápido para Meseros</h3>

    <!-- Imagen QR (clic para abrir modal) -->
    <img src="@Url.Action("Generar", "QR", new { url = linkQr })"
         alt="QR acceso meseros"
         class="img-fluid border shadow p-2 bg-white rounded"
         style="max-width: 250px; cursor:pointer;"
         data-bs-toggle="modal"
         data-bs-target="#qrModal" />

    <!-- Acciones -->
    <div class="mt-3 d-flex justify-content-center gap-2 flex-wrap">
        <!-- Descargar QR -->
        <a href="@Url.Action("Generar", "QR", new { url = linkQr })"
           download="QR_Meseros.png"
           class="btn btn-primary">
            <i class="bi bi-download"></i> Descargar QR
        </a>

        <!-- Abrir enlace en nueva ventana/pestaña -->
        <a href="@linkQr"
           target="_blank" rel="noopener"
           class="btn btn-outline-secondary">
            <i class="bi bi-box-arrow-up-right"></i> Abrir enlace en nueva ventana
        </a>
    </div>
</div>

<!-- Modal para previsualizar QR -->
<div class="modal fade" id="qrModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content text-center">
            <div class="modal-header">
                <h5 class="modal-title">Código QR de Acceso</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <img src="@Url.Action("Generar", "QR", new { url = linkQr })"
                     alt="QR acceso meseros"
                     class="img-fluid border shadow p-2 bg-white rounded"
                     style="max-width: 400px;" />
            </div>
            <div class="modal-footer d-flex justify-content-between flex-wrap gap-2">
                <!-- Descargar/Imprimir -->
                <a href="@Url.Action("Generar", "QR", new { url = linkQr })"
                   download="QR_Meseros.png"
                   class="btn btn-success">
                    <i class="bi bi-printer"></i> Descargar/Imprimir
                </a>

                <!-- Abrir enlace en nueva ventana/pestaña -->
                <a href="@linkQr"
                   target="_blank" rel="noopener"
                   class="btn btn-outline-secondary">
                    <i class="bi bi-box-arrow-up-right"></i> Abrir enlace en nueva ventana
                </a>

                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                    Cerrar
                </button>
            </div>
        </div>
    </div>
</div>
